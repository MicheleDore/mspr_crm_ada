<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8"/>
    <link rel="icon" data-th-href="@{/img/epsi.png}" sizes="32x32"/>
    <link rel="stylesheet" data-th-href="@{/css/layout.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/general.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/demo-table.css}"/>

    <title>Liste des clients</title>
  </head>
  <body>
    <header>
      <h1 id="nav-title">
        <a href="/">ACME</a>
      </h1>

      <nav>
        <ul>
          <li><a href="/produits">Produits</a></li>
          <li><a href="/clients">Clients</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <h1>La liste des clients</h1>
      <section>
        <a th:if="${#authorization.expression('hasAnyRole(''COMMERCIAL'',''DIR-COM'')')}" class="action" href="clients/creer">Ajouter un client</a>
        <table>
          <thead>
            <tr>
              <th>Id</th>
              <th>Nom</th>
              <th>Prenom</th>
            </tr>
          </thead>
          <tbody>
            <tr data-th-each="item : ${clients}">
              <td data-th-text="${item.idPersonne}"></td>
              <td data-th-text="${item.nom}"></td>
              <td data-th-text="${item.prenom}"></td>
              <td data-th-text="${item.rue}"></td>
              <td>
                <a data-th-href="@{/clients/{id}/edition(id=${item.idPersonne})}">Modifier</a>
                <a data-th-href="@{/clients/{id}/suppression(id=${item.idPersonne})}">Supprimer</a>
              </td>
            </tr>
          </tbody>
        </table>

      </section>
    </main>

    <footer>
      <p>&copy; EPSI POEC - Tous droits réservés</p>
    </footer>
  </body>
</html>